<div class="results-content">
  <div class="facets-container">
    <div class="title">
      NAVEGACIÓN
    </div>

    <% var aggs = audiencias.globals.results.aggregations; %>
    <% var options = audiencias.globals.results.options;  %>

    <% if (aggs && aggs.interest_invoked || options['interes-invocado']) { %>
      <div class="facet-section">
        <div class="facet-title">Interés Invocado</div>

        <% if (options['interes-invocado']) { %>
          <a href="<%= linkCreator({'interes-invocado': null, pagina: null}) %>">
            <div class="facet selected">
              <%= options['interes-invocado'] %>
              <div class="facet-value">
                <i class="fa fa-times" aria-hidden="true"></i>
              </div>
            </div>
          </a>          
        <% } else { %>
          <% for (var i=0; i<aggs.interest_invoked.buckets.length; i++) { %>
            <% var facet = aggs.interest_invoked.buckets[i]; %>
            <a href="<%= linkCreator({'interes-invocado': facet.key, pagina: null}) %>">
              <div class="facet">
                <%= facet.key %>
                <div class="facet-value">
                  <%= facet.doc_count %>
                </div>
              </div>
            </a>
          <% } %>
        <% } %>


      </div>
    <% } %>

  </div>
  <div class="results-container">
    <div class="results-list"></div>
    <div class="pagination">
      <% var results = audiencias.globals.results; %>
      <% if (results.total_pages > 1) { %>

        <% var current_page = results.current_page %>
        <% var total_pages = results.total_pages %>
        <% var minPage = current_page - 4 > 1 ? current_page - 4 : 1%>
        <% var maxPage = current_page + 5 <= total_pages ? current_page + 5 : total_pages + 1 %>
        
        <% if (minPage > 1) { %>
          <a href="<%= linkCreator({pagina: 1}) %>">
            <span class="pagination-link">«</span>
          </a>
        <% } %>
        
        <% for (var i=minPage; i<maxPage; i++) { %>
          <% if (i != current_page) { %>
            <a href="<%= linkCreator({pagina: i}) %>">
              <span class="pagination-link"><%= i %></span>
            </a>
          <% } else { %>
            <span class="pagination-link current-page"><%= i %></span>
          <% } %>
        <% } %>

        <% if (maxPage < total_pages) { %>
          <a href="<%= linkCreator({pagina: total_pages}) %>">
            <span class="pagination-link">»</span>
          </a>
        <% } %>

      <% } %>
    </div>
  </div>
</div>